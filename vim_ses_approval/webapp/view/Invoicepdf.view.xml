<mvc:View
    controllerName="com.sesapproval.vimsesapproval.controller.Invoicepdf"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:tL="sap.suite.ui.commons"
    xmlns:html="http://www.w3.org/1999/xhtml"
>
    <Page
        showFooter="false"
        showHeader="true"
    >
        <customHeader>
            <Bar>
             <contentMiddle>
                    <Title
                        text="{= ${viewModel>/showPdf} ? 'Invoice Preview' : (${viewModel>/showLogs} ? 'Invoice Logs' : '') }"
                        class="sapUiTinyMarginStart"
                    />
                </contentMiddle>
                <contentRight>
                    <Button
                        icon="sap-icon://decline"
                        type="Reject"
                        press="onClosePreview"
                        tooltip="Close"
                    />
                </contentRight>
            </Bar>
        </customHeader>

        <VBox class="sapUiTinyMargin">
            <!-- PDF Iframe Preview -->
            <core:HTML
                visible="{viewModel>/showPdf}"
                content='&lt;iframe id="pdfFrame" width="100%" height="700px" style="border:none;"&gt;&lt;/iframe&gt;'
            />

            <!-- Logs Section as Timeline -->
            <tL:Timeline
                id="idTimeline"
                visible="{viewModel>/showLogs}"
                enableDoubleSided="true"
                growingThreshold="10"
                sortOldestFirst="true"
                content="{logsModel>/}"
                class="customTimeline"
            >
                <tL:content>
                    <tL:TimelineItem
                        dateTime="{logsModel>TIMESTAMP}"
                        title="Level {logsModel>APPROVAL_LEVEL} - {logsModel>ACTION}"
                        userName="{logsModel>APPROVER_ID}"
                        text="Request No: {logsModel>REQUEST_NO}"
                        filterValue="{logsModel>ACTION}"
                        status="Information"
                    >
                        <tL:embeddedControl>
                            <VBox class="timelineEmbeddedContent">
                                <HBox>
                                    <Label
                                        text="Role:"
                                        class="label"
                                    />
                                    <Text
                                        text="{logsModel>APPROVER_ROLE}"
                                        class="value"
                                    />
                                </HBox>
                                <HBox>
                                    <Label
                                        text="Comment:"
                                        class="label"
                                    />
                                    <Text
                                        text="{logsModel>COMMENT}"
                                        class="value"
                                        wrapping="true"
                                    />
                                </HBox>
                            </VBox>
                        </tL:embeddedControl>
                    </tL:TimelineItem>
                </tL:content>
            </tL:Timeline>
        </VBox>
    </Page>
</mvc:View>
